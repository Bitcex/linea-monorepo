# Traces API Facade
This micro-service implements an API on top of the traces generated by zkGeth in json files to the file system.

## V1 API Methods
### rollup_getBlockTracesCountersV1
```bash
curl -H 'content-type:application/json' --data '{"jsonrpc":"2.0","id":"53","method":"rollup_getBlockTracesCountersV1","params":[{"blockNumber": "0x1", "blockHash": "0x..."}]}' http://127.0.0.1:8080
```


### rollup_generateConflatedTracesToFileV1
```bash
curl -H 'content-type:application/json' --data '{
    "jsonrpc": "2.0",
    "id": "53",
    "method": "rollup_generateConflatedTracesToFileV1",
    "params": [
        {
            "blockNumber": "0x1",
            "blockHash": "0xa64ab6ad3196000bc28973b88d285bc789de4afb6d4541b3d894b3293e745035"
        },
        {
            "blockNumber": "0x2",
            "blockHash": "0x71b744b0bc0028c635fb096cace4fcabeb5ca311a42915e4707d9d549b132182"
        },
        {
            "blockNumber": "0x3",
            "blockHash": "0x0bbeddf6cc52f77935c5e4ba2e9c310a317cbdcfc4965e5defc6310912e0e8d2"
        }
    ]
}' http://127.0.0.1:8080
```


### Traces Counters Response Example
```json
{
    "jsonrpc": "2.0",
    "id": "53",
    "result": {
        "tracesEngineVersion": "0.0.1",
        "tracesCounters": {
            "ADD": 41,
            "BIN": 896,
            "BIN_RT": 879,
            "DISPATCHER": 119,
            "EXT": 795,
            "HUB": 349,
            "INSTRUCTION_DECODER": 123,
            "MMU_ID": 857,
            "MOD": 854,
            "MUL": 329,
            "MXP": 901,
            "PUB": 104,
            "ROM": 981,
            "SHF": 839,
            "SHF_RT": 235
        }
    }
}
```

### Conflation Response Example
```json
{
  "jsonrpc": "2.0",
  "id": "53",
  "result": {
    "tracesEngineVersion": "0.0.1",
    "conflatedTracesFileName": "13673-13675.conflated.v0.0.1.json.gz"
  }
}
```

## V0 Api Methods - Deprecated
Same responses as V1

### rollup_getTracesCountersByBlockNumberV0
```bash
curl -H 'content-type:application/json' --data '{"jsonrpc":"2.0","id":"53","method":"rollup_getTracesCountersByBlockNumberV0","params":["0xDF1"]}' http://127.0.0.1:8080
```

### rollup_generateConflatedTracesToFileV0
```bash
curl -H 'content-type:application/json' --data '{"jsonrpc":"2.0","id":"53","method":"rollup_generateConflatedTracesToFileV0","params":["0xDF1", "0xDF3"]}' http://127.0.0.1:8080/
```

### rollup_getConflatedTracesV0
```bash
curl -H 'content-type:application/json' --data '{"jsonrpc":"2.0","id":"53","method":"rollup_generateConflatedTracesToFileV0","params":["3569", "356B"]}' http://127.0.0.1:8080/
```
